(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{370:function(s,a,t){"use strict";t.r(a);var e=t(42),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"redisについて"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redisについて"}},[s._v("#")]),s._v(" Redisについて")]),s._v(" "),t("p",[s._v("ここは"),t("code",[s._v("Redis")]),s._v("のことを書いてるよ")]),s._v(" "),t("h2",{attrs:{id:"redisの環境構築"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redisの環境構築"}},[s._v("#")]),s._v(" redisの環境構築")]),s._v(" "),t("h3",{attrs:{id:"dockerでredisの環境を作成する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerでredisの環境を作成する"}},[s._v("#")]),s._v(" Dockerでredisの環境を作成する")]),s._v(" "),t("p",[s._v("次の"),t("code",[s._v("docker-composer.yml")]),s._v("ですぐにredisを立ち上げられるようにする")]),s._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("latest\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6379:6379"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("appendonly yes\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./data/redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostname")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n")])])]),t("h3",{attrs:{id:"redis-server-の-起動方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-server-の-起動方法"}},[s._v("#")]),s._v(" Redis server の 起動方法")]),s._v(" "),t("p",[s._v("次のコマンドでサーバを起動する")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ redis-server --appendonly "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])])]),t("p",[t("code",[s._v("appendonly yes")]),s._v("は、障害とかが発生してデータが消えることを防ぐためのAOFをオンにする設定")]),s._v(" "),t("p",[s._v("終了するなら"),t("code",[s._v("process")]),s._v("を終わらせればいいんじゃないかな")]),s._v(" "),t("h4",{attrs:{id:"aof-append-only-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aof-append-only-file"}},[s._v("#")]),s._v(" AOF（Append Only File）")]),s._v(" "),t("p",[s._v("RDBファイルで自動保存するだけでも問題ないけど、障害とかが発生した時にデータを保存されないことを防ぐための機能")]),s._v(" "),t("p",[s._v("デフォルトだと1秒に1回"),t("code",[s._v("fsync")]),s._v("して記録する")]),s._v(" "),t("p",[s._v("AOFは、実行された書き込みコマンドを記録してデータを保存するようにしてる")]),s._v(" "),t("p",[s._v("Redis AOF は、MySQL や MongoDB みたいに、現在の状態をインクリメンタルにアップデートするように動くよ")]),s._v(" "),t("h3",{attrs:{id:"redis-client-の-起動方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-client-の-起動方法"}},[s._v("#")]),s._v(" Redis client の 起動方法")]),s._v(" "),t("p",[s._v("Redisのデータを直接操作するための対話式プログラムが起動するよ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ redis-cli\n")])])]),t("h3",{attrs:{id:"redis-client-を終了する方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-client-を終了する方法"}},[s._v("#")]),s._v(" Redis client を終了する方法")]),s._v(" "),t("p",[s._v("Redisのclientの対話式プログラム内で次のコマンドを実行すればclientは終わる")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])])]),t("h3",{attrs:{id:"redis-で-rdbファイルを作って終了する"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-で-rdbファイルを作って終了する"}},[s._v("#")]),s._v(" Redis で RDBファイルを作って終了する")]),s._v(" "),t("p",[s._v("Redisのclientの対話式プログラム内で次のコマンドを実行すればRDBファイルが作られてclientとserverが終わる")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n")])])]),t("h3",{attrs:{id:"データベースの切り替え"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データベースの切り替え"}},[s._v("#")]),s._v(" データベースの切り替え")]),s._v(" "),t("p",[s._v("Redisのデータベースは、0から始まる整数値のindexを持っているからそれで指定するよ")]),s._v(" "),t("p",[s._v("切り替える時は、"),t("code",[s._v("select")]),s._v("コマンドで切り替え")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h3",{attrs:{id:"データの保存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データの保存"}},[s._v("#")]),s._v(" データの保存")]),s._v(" "),t("p",[s._v("データベースのデータ保存")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" bgsave\n")])])]),t("h3",{attrs:{id:"データの操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データの操作"}},[s._v("#")]),s._v(" データの操作")]),s._v(" "),t("h4",{attrs:{id:"データを保存するset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データを保存するset"}},[s._v("#")]),s._v(" データを保存するSet")]),s._v(" "),t("p",[t("code",[s._v("set")]),s._v("コマンドでデータベースにデータを保存か更新する")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" KEY VALUE\n")])])]),t("h4",{attrs:{id:"複数のキーでデータを保存するmset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#複数のキーでデータを保存するmset"}},[s._v("#")]),s._v(" 複数のキーでデータを保存するmset")]),s._v(" "),t("p",[s._v("複数のキーのデータを保存するなら"),t("code",[s._v("mset")]),s._v("を使うよ")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("> mset KEY VALUE KEY VALUE\n")])])]),t("h4",{attrs:{id:"データを取得するget"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データを取得するget"}},[s._v("#")]),s._v(" データを取得するGet")]),s._v(" "),t("p",[t("code",[s._v("get")]),s._v("コマンドでキーを元にデータベースの内容を取得する")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" get KEY\n")])])]),t("h4",{attrs:{id:"複数のキーのデータを取得するmget"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#複数のキーのデータを取得するmget"}},[s._v("#")]),s._v(" 複数のキーのデータを取得するmget")]),s._v(" "),t("p",[s._v("複数のキーのデータを取得するなら"),t("code",[s._v("mget")]),s._v(" を使うよ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mget KEY KEY KEY "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),t("h4",{attrs:{id:"キーがあるか確認するexist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#キーがあるか確認するexist"}},[s._v("#")]),s._v(" キーがあるか確認するexist")]),s._v(" "),t("p",[t("code",[s._v("exist")]),s._v(" コマンドを使うとキーに値がすでにあるか確認できるよ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exist KEY\n")])])]),t("h3",{attrs:{id:"データの操作-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データの操作-2"}},[s._v("#")]),s._v(" データの操作")]),s._v(" "),t("h4",{attrs:{id:"キーとキーのデータを削除するdel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#キーとキーのデータを削除するdel"}},[s._v("#")]),s._v(" キーとキーのデータを削除するdel")]),s._v(" "),t("p",[s._v("キーのデータを削除するときは"),t("code",[s._v("del")]),s._v("を使うよ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" del KEY "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),t("p",[s._v("複数のキーも指定できる")]),s._v(" "),t("h4",{attrs:{id:"データの型を調べるtype"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データの型を調べるtype"}},[s._v("#")]),s._v(" データの型を調べるtype")]),s._v(" "),t("p",[s._v("キーの中のデータの型を知りたいときは"),t("code",[s._v("type")]),s._v("を使うよ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" KEY\n")])])]),t("h3",{attrs:{id:"データ構造"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データ構造"}},[s._v("#")]),s._v(" データ構造")]),s._v(" "),t("h4",{attrs:{id:"string"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[s._v("#")]),s._v(" String")]),s._v(" "),t("p",[s._v("Get, Set で、設定と取得できる基本的な型のこと")]),s._v(" "),t("p",[s._v("数値文字の操作も可能")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])])]),t("h5",{attrs:{id:"保存済みのキーの値の数値型に-1するincr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保存済みのキーの値の数値型に-1するincr"}},[s._v("#")]),s._v(" 保存済みのキーの値の数値型に+1するincr")]),s._v(" "),t("p",[s._v("保存済みのキーの値の数値に+1する"),t("code",[s._v("incr")])]),s._v(" "),t("p",[s._v("Incrementの意味だったよ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" incr KEY \n")])])]),t("h5",{attrs:{id:"保存済みのキーの値の数値型に追加した分の値を追加するincrby"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保存済みのキーの値の数値型に追加した分の値を追加するincrby"}},[s._v("#")]),s._v(" 保存済みのキーの値の数値型に追加した分の値を追加するincrby")]),s._v(" "),t("p",[s._v("保存済みのキーの値の数値に追加したい分の値を追加する"),t("code",[s._v("incrby")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" incrby KEY VALUE\n")])])]),t("p",[t("code",[s._v("VALUE")]),s._v("が追加したい分の値のこと")]),s._v(" "),t("h3",{attrs:{id:"データ構造-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#データ構造-2"}},[s._v("#")]),s._v(" データ構造")]),s._v(" "),t("h4",{attrs:{id:"string-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-2"}},[s._v("#")]),s._v(" String")]),s._v(" "),t("h5",{attrs:{id:"保存済みのキーの値の数値型に-1するdincr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保存済みのキーの値の数値型に-1するdincr"}},[s._v("#")]),s._v(" 保存済みのキーの値の数値型に-1するdincr")]),s._v(" "),t("p",[s._v("保存済みのキーの値の数値に+1する"),t("code",[s._v("dicr")])]),s._v(" "),t("p",[s._v("Decrementの意味だったよ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" dicr KEY \n")])])]),t("h5",{attrs:{id:"保存済みのキーの値の数値型に追加した分の値を引くdicrby"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#保存済みのキーの値の数値型に追加した分の値を引くdicrby"}},[s._v("#")]),s._v(" 保存済みのキーの値の数値型に追加した分の値を引くdicrby")]),s._v(" "),t("p",[s._v("保存済みのキーの値の数値に追加したい分の値を引き算する"),t("code",[s._v("dicrby")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" dicrby KEY VALUE\n")])])]),t("p",[t("code",[s._v("VALUE")]),s._v("が追加したい分の値のこと")]),s._v(" "),t("h4",{attrs:{id:"list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[s._v("#")]),s._v(" List")]),s._v(" "),t("p",[s._v("簡単に書くとStringのリスト")]),s._v(" "),t("p",[s._v("JavaScriptとかのArrayのイメージが一番近いかもしれない")]),s._v(" "),t("h5",{attrs:{id:"要素の追加"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#要素の追加"}},[s._v("#")]),s._v(" 要素の追加")]),s._v(" "),t("p",[s._v("要素を追加するというより向きが2種類あるよ")]),s._v(" "),t("p",[s._v("初期化はこの二つでやるっぽい？")]),s._v(" "),t("h5",{attrs:{id:"左から追加する-lpush"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#左から追加する-lpush"}},[s._v("#")]),s._v(" 左から追加する lpush")]),s._v(" "),t("p",[s._v("Listの左側にVALUEを追加する")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" lpush KEY VALUE \n")])])]),t("h5",{attrs:{id:"右から追加する-rpush"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#右から追加する-rpush"}},[s._v("#")]),s._v(" 右から追加する rpush")]),s._v(" "),t("p",[s._v("Listの右側に追加する")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" rpush KEY VALUE \n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);